% Load the video sequence
convert2gray = @(im) im2double(im2gray(im));
video = VideoReader('source.mp4');
framea = readFrame(video);
frameb = readFrame(video);
framea = convert2gray(framea);
frameb = convert2gray(frameb);
block_size = 16;
search_range = 7;
[motion_vec, avg_MAD, num_compare] = motionEstimationByES(framea, frameb, block_size, search_range);
x =
